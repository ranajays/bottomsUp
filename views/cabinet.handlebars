<!doctype html>

<html>
<head>
	<title>bottomsUp: My Cabinet</title>	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
	<link href="/css/bootstrap.min.css" rel="stylesheet">
	<!-- <link href="/css/bootstrap-theme.min.css" rel="stylesheet"> -->
	<link href="/css/introHCI.css" rel="stylesheet">
	<link href="/css/flat-ui.css" rel="stylesheet">
	<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">

	<!-- this is a comment in HTML -->

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->        
</head>

<body>
	<!-- <nav class="navbar navbar-default" role="navigation">
			  <div class="navbar-header">
			    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-01">
			      <span class="sr-only">Toggle navigation</span>
			    </button>
			    <a class="navbar-brand" href="/">BottomsUp</a>
			  </div>
			  <div class="collapse navbar-collapse navbar-center" id="navbar-collapse-01">
			    <ul class="nav navbar-nav"> 
			      <li class="active"><a href="cabinet">My Cabinet</a></li>
			      <li><a href="makeDrinks">Make Drinks</a></li>
			    </ul>           
			  </div>
	</nav> -->

	<ol class="breadcrumb">
		<li><a href="cabinet">BottomsUp</a></li>
		<li class="active">My Cabinet</li>
	</ol>

		<!-- <div class="btn-group-wrap">
			<div class="btn-group" id="custom-navbar">
				<a class="btn btn-primary" href="/">BottomsUp</a>
				<a class="btn btn-primary" href="cabinet">My Cabinet</a>
				<a class="btn btn-primary" href="makeDrinks">Make Drinks</a>
			</div>
		</div>
 -->

	<div class="container fitWidth">
		<!-- h1 through h6 are headers. The higher the number, the smaller the header -->
		<!-- p means paragraph -->
		<!-- <center><h1>My Cabinet</h1></center> -->
		<form class="fitWidth" role="search">
				<center><div class="alert alert-success" style="padding: 0px; width: 60%; display: none; font-size: 60%;">Ingredient Added!</div></center>
				<center><div class="alert alert-danger" style="padding: 0px; width: 60%; display: none; font-size: 60%;">Ingredient Deleted!</div></center>
			  {{#if cabinet.hasText}}
			  <p>Add ingredients you have... <a href="/cabinet2?delete_all=true" class="btn btn-default btn-xs" style="float:right;"><span class="goog_qs-tidbit goog_qs-tidbit-0">Clear All</span></a></p>
			  {{else}}
			  <p>Add ingredients you have... <a href="/cabinet?delete_all=true" class="btn btn-default btn-xs" style="float:right;"><span class="goog_qs-tidbit goog_qs-tidbit-0">Clear All</span></a></p>
			  {{/if}}
	          <input type="text" id="add_ingredient" class="form-control input-block-level" placeholder="e.g. rum">
	        <!-- <button type="submit" class="btn btn-default">Submit</button> -->
      	</form>

      <!-- <ul class="list-group"> -->
        </br>
        <div class="ingredients-section">
        <ul>
        	{{#if cabinet.hasText}}
        		<center><p>(Tap ingredient to delete individually)</p></center>
      			{{#if cabinet}}
      			{{#each cabinet}}
      			{{#if this.ingredient}}
				  <div class="alcohol-display">
				  	<div class="alcohol-image-display">
				  		<!-- <img class="displayImage" src="{{this.image_url}}"> -->
					  	<a href="/cabinet2?delete_ingredient={{this.id}}">
					  		<img class="x-button" src="https://cdn1.iconfinder.com/data/icons/perfect-flat-icons-2/512/Close_delete_remove_exit_cross_x_button_error.png">
					  	</a>
					  	<img class="displayImage" src="{{this.image_url}}">
						<p class="alcohol-name">{{this.ingredient}}</p>
					</div>
			      </div>
				 {{/if}}
				 {{/each}}
				 {{else}}
				 <p>Your cabinet is empty! Add some ingredients.</p>
				 {{/if}}
			{{else}}
				{{#if cabinet}}
      			{{#each cabinet}}
      			{{#if this.ingredient}}
				  <div class="alcohol-display">
				  	<div class="alcohol-image-display">
				  		<!-- <img class="displayImage" src="{{this.image_url}}"> -->
					  	<a href="/cabinet?delete_ingredient={{this.id}}">
					  		<img class="x-button2" src="https://cdn1.iconfinder.com/data/icons/perfect-flat-icons-2/512/Close_delete_remove_exit_cross_x_button_error.png">
					  	</a>
					  	<img class="displayImage" src="{{this.image_url}}">
						<p class="alcohol-name">{{this.ingredient}}</p>
					</div>
			      </div>
				 {{/if}}
				 {{/each}}
				 {{else}}
				 <p>Your cabinet is empty! Add some ingredients.</p>
				 {{/if}}
			{{/if}}
		<!-- </ul> -->
		</ul>
		</div>
		<br/>
		<br/>
		<div class="makeDrink-button">
			<a class="fitWidth" href="makeDrinks"><button class="btn btn-block btn btn-info">Drinks you can make</button></a>
		</div>
		<!-- <hr></hr> -->
		<!-- <div class="removeAll-button">
			<a class="fitWidth" href="/cabinet?delete_all=true"><button class="btn btn-block btn btn-default"><span class="goog_qs-tidbit goog_qs-tidbit-0">Clear all</span></button></a>
		</div> -->

	</div>
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/introHCI.js"></script>
	<script src="//code.jquery.com/jquery-1.9.1.js"></script>
  	<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
  	<script type="text/javascript">
  		var availableTags = JSON.parse('{{ingredients}}'.replace(/&quot;/g,'"'));
  		// console.log(availableTags);
	    $( "#add_ingredient" ).autocomplete({
	      source: availableTags,
	      select: function(event, ui) {
            console.log(ui);
            addIngredient(parseInt(ui.item.id));
            $("#add_ingredient").val('');
       		}
	    });
	    
	    if (document.location.href.search("add_ingredient") != -1) {
	    	$(".alert-success").show();
			window.setTimeout(function() { $(".alert-success").hide(); }, 2000);
	    }

	     if (document.location.href.search("delete_ingredient") != -1) {
	    	$(".alert-danger").show();
			window.setTimeout(function() { $(".alert-danger").hide(); }, 2000);
	    }
	    
	    function addIngredient (ingredient_id) {
	    	{{#if cabinet.hasText}}
	    	window.location.href = '/cabinet2?add_ingredient='+ingredient_id;
	    	{{else}}
	    	window.location.href = '/cabinet?add_ingredient='+ingredient_id;
	    	{{/if}}
	      // $.ajax({
	      //   type: "GET",
	      //   url: "/cabinet",
	      //   data: {add_ingredient: ingredient_id},
	      //   success: function(data) {
	      //   	// location.reload();
	      //   	// console.log(window.location.href);
	      //   	// window.location.href=window.location.href;
	      //   }
	      // });
	    }
  	</script>

  	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-48461632-2', { 'cookieDomain': 'none' });
	  ga('send', 'pageview');

	</script>

</body>
</html>
